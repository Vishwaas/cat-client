<h2>Edit Configuration</h2>
<ConfigEditor on:saveConfig="createNewConfig(event.config)" data={data}/>
<script>
  import ConfigEditor from '../../components/config-editor.html';
  import $ from 'jquery';
  export default {
    preload({params, query}) {
      let {configId} = params;
      return new Promise((resolve) => {
        resolve({
          id: 213,
          name: 'Base Config 1',
          filters: [{
            name: 'F1',
            values: [123, 456]
          }]
        })
      }).then((result) => {
        return {data: result};
      });
    },

    components:{ConfigEditor},

    methods: {
      createNewConfig(newConfig) {
        $.ajax({
          url: "http://localhost:3000/v1/config/" + newConfig.id,
          type: "PUT",
          data: JSON.stringify(newConfig),
          success: () => {
            this.root.fire('alert-notification', {
              header: 'Sucess',
              message: 'Sucessed created new configuration'
            });
          }
        });
      }
    }
  };
</script>
