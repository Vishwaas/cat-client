<h2>Configuration List</h2>
{#await configurations}
	<div class="loading">Loading. Please Wait...</div>
{:then result}
	<div class="configuration-container">
		{#if result && result.length}
			{#each result as configuration}
				<ConfigBox config={configuration} />
			{/each}
		{:else}
			No Configurations available. Kindle create one.
		{/if}
	</div>
{/await}

<style>
	.configuration-container {
	  display: flex;
	  justify-content: flex-start;
	  flex-wrap: wrap;
	}
</style>

<script>
	import ConfigBox from "../components/config-box";

	export default {
	  components: { ConfigBox },

	  preload() {
	    return this.fetch("http://localhost:3000/v1/config")
	      .then(r => r.json())
	      .then(configurations => {
	        return { configurations };
	      }).catch(() => {
					return {
						configurations: [{
								name: "Config 1",
								id: 1,
								filters: [{
									name: 'Filter 1',
									values: ['0-10', '11-20']
								}]
							}, {
							name: "Config 2",
							id: 2,
							filters: [{
								name: 'Filter 2',
								values: ['0-100', '101-200']
							}]
						}]
					};
				});
	  },

	  data() {
	    return {
	      id: null
	    };
	  }
	};
</script>
