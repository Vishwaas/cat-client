<h2>Create Configuration</h2>
<ConfigEditor on:saveConfig="createNewConfig(event.config)" />
<script>
  import ConfigEditor from "../components/config-editor.html";
  import $ from "jquery";
  import * as sapper from "../../__sapper__/client.js";

  export default {
    components: { ConfigEditor },
    methods: {
      createNewConfig(newConfig) {
        $.ajax({
          url: "http://localhost:3000/v1/config/",
          type: "POST",
          data: {
            configuration: JSON.stringify(newConfig)
          },
          success: () => {
            this.root.fire("alert-notification", {
              header: "Sucess",
              message: "Sucessed created new configuration"
            });
            sapper.goto("/");
          }
        });
      }
    }
  };
</script>
