<h2>Create Configuration</h2>
<ConfigEditor on:saveConfig="createNewConfig(event.config)" />
<script>
  import ConfigEditor from "../components/config-editor.html";
  import $ from "jquery";
  import * as sapper from "../../__sapper__/client.js";
  import AjaxService from "../services/ajax";

  export default {
    components: { ConfigEditor },
    methods: {
      createNewConfig(data) {
        AjaxService.post({
          url: "/v1/configurations/",
          data
        })
          .then(() => {
            this.root.fire("alert-notification", {
              header: "Success",
              message: "Sucessed created new configuration"
            });
            sapper.goto("/");
          })
          .catch(err => {
            this.root.fire("alert-notification", {
              header: "Error",
              message: "Could not create new configuration. Try after sometime"
            });
          });
      }
    }
  };
</script>
